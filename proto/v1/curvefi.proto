syntax = "proto3";

package evm.curvefi.v1;

message Events { repeated Transaction transactions = 1; }

message Transaction {
  bytes hash = 1;
  bytes from = 2;
  optional bytes to = 3;
  uint64 nonce = 5;
  string gas_price = 6; // uint256
  uint64 gas_limit = 7;
  uint64 gas_used = 8;
  string value = 9; // uint256
  repeated Log logs = 10;
}

// https://github.com/curvefi/curve-contract/blob/master/contracts/pools/3pool/StableSwap3Pool.vy
message Log {
  bytes address = 1;
  uint64 ordinal = 2;
  repeated bytes topics = 3;
  bytes data = 4;
  oneof log {
    Transfer transfer = 10;
    Approval approval = 11;
  }
}

/// @notice Emitted when tokens are transferred
/// @param from The address sending tokens
/// @param to The address receiving tokens
/// @param value The amount of tokens transferred
message Transfer {
  bytes from = 1; // address (indexed as _from)
  bytes to = 2; // address (indexed as _to)
  string value = 3; // uint256 (_value)
}

/// @notice Emitted when an approval is made
/// @param owner The address of the token owner
/// @param spender The address of the spender
/// @param value The amount of tokens approved
message Approval {
  bytes owner = 1; // address (indexed as _owner)
  bytes spender = 2; // address (indexed as _spender)
  string value = 3; // uint256 (_value)
}
